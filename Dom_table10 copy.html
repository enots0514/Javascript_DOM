<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dom_table10</title>
    <style>
      table{float:left; margin:0 1rem; border:10px outset rgba(0, 26, 255, 0.705); 
     
      }
      .cf:after{display:block; content:""; clear:both;
      }
    </style>
</head>
<body>
    <section id="section10" class="cf">
        <h1>Ex10-클릭한 컬럼을 기준으로 레코드 정렬하기 #3</h1>  
        <template>
            <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><a href=""></a></td>
                    <td></td>
                    <td></td>
            </tr>
        </template>
     
        <table border="1" class="table-list">
            <thead>
                <tr>
                    <td class="check"><input type="checkbox" class="all-check" /></td>
                    <td class="no">No</td>
                    <td class="title">Title</td>
                    <td class="link">Link</td>
                    <td class="subject">Subject</td>
                    <td class="level">Level</td>
                </tr>
            </thead>
            <tbody>
                <!-- <tr>                        
                    <td>1</td>
                    <td><a href="1">자바스크립트란..</a></td>
                    <td>2019-02-03</td>
                    <td>newlec</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><a href="2">유투브에 끌려다니지 않으려고 했는데....ㅜㅜ..</a></td>
                    <td>2019-02-02</td>
                    <td>newlec</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><a href="3">기본기가 튼튼해야....</a></td>
                    <td>2019-02-01</td>
                    <td>newlec</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><a href="4">근데 조회수가 ㅜㅜ..</a></td>
                    <td>2019-01-25</td>
                    <td>newlec</td>
                    <td>0</td>
                </tr> -->
            </tbody>
        </table>
        
        <div id="change-btn">
            <input type="button" class="template-btn" value="템플릿감추기" /> 
        <br/>
            <input type="button" class="template-show" value="템플릿보이기" /> 
        <br/>      
            <input type="color" class="color-box"/> 
            <input type="button" class="color-btn" value="보더 바꾸기" /> 
        <br/> 
            <select class="table-bgcolor">
                <option value="rgba(255, 55, 85, 0.5)">red 계열</option>
                <option value="rgba(0, 25, 235, 0.2)">blue 계열</option>
                <option value="rgba(0, 255, 225, 0.3)">yellow 계열</option>
                <option value="rgba(255, 255, 255, 1)">화이트계열</option>
                <option value="rgba(0, 0, 0, 0.5)">블랙계열</option>
            </select> 
            <input type="button" class="bgcolor-btn" value="배경 색상 바꾸기" /> 
            <br/>
            <input type="text" class="tr-add" placeholder="복제할 라인 숫자" /> 
            <input type="button" class="tr-add-btn" value="복제추가하기" /> 
            <br/>
            <input type="text" class="tr-del" placeholder="삭제할 라인 숫자" /> 
            <input type="button" class="tr-del-btn" value="라인삭제하기" /> 
            <br/>
            <input type="button" class="up-btn" value="위로 올리기" /> 
            <input type="button" class="down-btn" value="아래로 내리기" />
            <br/>
            <input type="button" class="check-del" value="체크 삭제하기" /> 
            <input type="button" class="check-change" value="체크 바꾸기" />  

        </div> 
    <br/>
    </section>
    <hr />    
    <section id="section6">
       <h2>Ex6-노드조작: 메뉴추가(createTextNode, Element)</h1>
        <div id="node6">
            <input class="title-input" name="title" />
            <input type="button" class="add-button" value="추가" />
            <input type="button" class="del-button" value="삭제" />
        </div>
        <ul class="menu-list">
            <li><a href="">aaa</a></li>
            <li><a href="">bbb</a></li>
        </ul>
    </section>
  
    

<script>
        //Ex10-클릭한 컬럼을 기준으로 레코드 정렬하기 #1
            

const notices = [
    {"No":1, "Title":"비주얼 스튜디오 코드 설치", "Link":"https://pafa.tistory.com/114?category=476827", "Subject":"자바스크립트", "Level":"중급"},
    {"No":2, "Title":"함수 기본 원리", "Link":"https://pafa.tistory.com/105?category=476827", "Subject":"자바스크립트", "Level":"초급"},
    {"No":3, "Title":"자바스크립트 계산기", "Link":"https://pafa.tistory.com/107?category=476827", "Subject":"자바스크립트", "Level":"중급"},
    {"No":4, "Title":"DOM 제어대상 찾기", "Link":"https://pafa.tistory.com/108?category=476827", "Subject":"자바스크립트", "Level":"초급"},
    {"No":5, "Title":"자바스크립트 변수 let...", "Link":"https://pafa.tistory.com/123?category=476828", "Subject":"자바스크립트", "Level":"상급"}
];

const section = document.querySelector("#section10");

const tableList =section.querySelector(".table-list");
const titldTd = section.querySelector(".title");
const tbodyNode = tableList.querySelector("tbody");

const changeBtn =section.querySelector("#change-btn");
const colorBox =changeBtn.querySelector(".color-box");
const colorBtn =changeBtn.querySelector(".color-btn");

// 보더 바꾸기  .style.borderColor = colorBox.value;

colorBtn.addEventListener('click', function(){
               
    tableList.style.borderColor = colorBox.value;

});

const tableBgcolor =changeBtn.querySelector(".table-bgcolor");
const bgcolorBtn = changeBtn.querySelector(".bgcolor-btn");

// 배경 색상 바꾸기 .style.backgroundColor = tableBgcolor.value;
bgcolorBtn.addEventListener('click', function(){
               
               tableList.style.backgroundColor = tableBgcolor.value;
           
           });

          
// 정렬하기  template   const cloneNode = template.content.cloneNode(true);
// `<a href="${notices[i].Link}">바로가기</a>`  tbodyNode.append(cloneNode);

const bindData = function(){
    const template = section.querySelector("template");
 

    for(let i=0; i<notices.length; i++){
        // var cloneNode = document.importNode(template.content, true);
        const cloneNode = template.content.cloneNode(true);
        const tds = cloneNode.querySelectorAll("td");
       tds[0].innerHTML=`<input type="checkbox" /> `
        tds[1].textContent = notices[i].No;            
        tds[2].textContent = notices[i].Title;
        
        tds[3].innerHTML =`<a href="${notices[i].Link}">바로가기</a>`;
        // 아래처럼 풀어쓸 수도 있다.
        // const aNode = tds[2].children[0];
        // aNode.href=notices[i].Link;
        // aNode.textContent = "바로가기";
        
        tds[4].textContent = notices[i].Subject;
        tds[5].textContent = notices[i].Level; 

        // tbodyNode.appendChild(cloneNode);
        tbodyNode.append(cloneNode);
        let trNode = tbodyNode.querySelectorAll("tr");
        trNode[0].style.backgroundColor="blue"
     }

    
};

bindData();

//  정렬부분 체크 요망
 let titleSorted = false;

titldTd.onclick = function(){
    
    tbodyNode.innerHTML = "";

    
    if(!titleSorted){
        notices.sort(function(x,y){     
            titleSorted = true;
                if(x.title < y.title){
                    return -1;
                    } else if(x.title > y.title ){
                        return 1;
                    } else {
                        return 0;
                    }

                });
              
       }else{
           notices.reverse(); 
       }
         bindData();       
    
    };

// 템플릿 감추기
const templateBtn = changeBtn.querySelector(".template-btn");
templateBtn.addEventListener('click', function(){
    tbodyNode.style.visibility="hidden";
}  );

// 템플릿 보이기
const templateShow = changeBtn.querySelector(".template-show");
templateShow.addEventListener('click',  function(){
    tbodyNode.style.visibility="visible";
}  );



// ex-9 다중 체크 선택 및 삭제(바꾸기바꾸기) 
//   replaceWith checked  ("input[type='checkbox']:checked") cloneNode(true)

  const allCheck = tableList.querySelector(".all-check");

  const inChecks = tbodyNode.querySelectorAll("input[type='checkbox']");

  const checkDel =changeBtn.querySelector(".check-del");
  const checkChange =changeBtn.querySelector(".check-change"); 
         
         allCheck.addEventListener('change', function(){   
             for(let g=0; g < inChecks.length; g++ )    
            inChecks[g].checked = allCheck.checked;

         });

     checkDel.addEventListener('click', function(){
         // 셀렉틱 체크 요망 - 중요 
         // 체크 된 것만 선택함
      const checkInput = tbodyNode.querySelectorAll("input[type='checkbox']:checked");
        //   console.log(checkInput.length);
          
          for(let d=0; d<checkInput.length; d++)
           checkInput[d].parentElement.parentElement.remove();
           // 체크된 것이 인풋이므로 부모td의 부모tr를 삭제함.
     });   

     checkChange.addEventListener('click', function(){   
        const checkInput = tbodyNode.querySelectorAll("input[type='checkbox']:checked");
          
        if(checkInput.length !=2  ){
          alert("2개만 선택해주세요");
          return;
      }  
        // const ck1 = checkInput[0].parentElement.parentElement;
        // const ck2 = checkInput[1].parentElement.parentElement;
        //  const clondCk1 = ck1.cloneNode(true);
        //  ck2.replaceWith(clondCk1);
        //  ck1.replaceWith(ck2);
       // 위의 것을 조금 세련되게 하면
      //  선택된 것들의 부모의 부모를 배열에 담아서 처리함 
      
       const checking = [ ];

       for(let i=0; i<checkInput.length; i++ ){
          checking.push(checkInput[i].parentElement.parentElement);
       }

         const clondCk1 = checking[0].cloneNode(true);
         checking[1].replaceWith(clondCk1);
         checking[0].replaceWith(checking[1]);
     });    

// 테이블 라인 복제 추가하기 cloneNode(true)
           
     
const trAddBtn = changeBtn.querySelector(".tr-add-btn");
const trNode = tbodyNode.querySelectorAll("tr");
const trAdd = changeBtn.querySelector(".tr-add");

trAddBtn.addEventListener('click', function(){
             
           let s = +(trAdd.value) - 1;
           const cTr = trNode[s].cloneNode(true);
           tbodyNode.append(cTr);
            trAdd.value = "";
           });



// 테이블 라인 삭제하기 remove()

const trDelBtn = changeBtn.querySelector(".tr-del-btn");
const trDel = changeBtn.querySelector(".tr-del");


trDelBtn.addEventListener('click', function(){
           let s = +(trDel.value) - 1;
           trNode[s].remove();
           trDel.value = "";
           });           

 // ex-8 위로 올리기, 아래로 내리기  
//   (nextTrNode == null)  nextTrNode.after(currentTrNode);     


 const upBtn = changeBtn.querySelector(".up-btn");
const downBtn = changeBtn.querySelector(".down-btn");


downBtn.addEventListener('click', function(){   

    const currentTrNode = trNode[0];
       
    const nextTrNode = currentTrNode.nextElementSibling;

    if(nextTrNode == null){
        alert("더 이상 라인이 없습니다");
        return;
    }

    nextTrNode.after(currentTrNode);
    
});

upBtn.addEventListener('click', function(){   

const currentTrNode = trNode[0];
const prevTrNode = currentTrNode.previousElementSibling;

if(prevTrNode == null){
    alert("더 이상 라인이 없습니다");
    return;
}

currentTrNode.after(prevTrNode);


});


   // EX-6 노드 조작 
//    menuList.innerHTML += `<li><a href="">${titleInput.value}</a></li>`;

         const section6 = document.querySelector("#section6");
        const node6 = section6.querySelector("#node6"); 
        const titleInput = node6.querySelector(".title-input");
        const addBtn = node6.querySelector(".add-button");
        const delBtn = node6.querySelector(".del-button");
        const menuList = section6.querySelector(".menu-list"); 

          addBtn.addEventListener('click', function(){
         
        //  const aNode = document.createElement('a'); 
        //  aNode.href="";
        //  aNode.textContent = titleInput.value; 
        //  const liNode  = document.createElement("li"); 
        //  liNode.append(aNode);
        //  menuList.append(liNode);
        //  titleInput.value = "";
                    
        menuList.innerHTML += `<li><a href="">${titleInput.value}</a></li>`; 
        // 이 방법이 심플하지만 단순히 추가가 아니라 새로 객체를 생성해지는 복잡한 구조이다      
         // 이럴 땐 아래 방법을 사용하자
        //   let html = `<a href="">${titleInput.value}</a>`;
        //   let liNode = document.createElement("li");
        //   liNode.innerHTML = html;  

        //   menuList.append(liNode);

        });    

        delBtn.addEventListener('click', function(){
            
           menuList.children[0].remove();
           titleInput.value = "";
        
        }); 

    




    </script>
</body>
</html>